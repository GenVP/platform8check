# platform8check

Библиотека для выполнения платформенной проверки платформой 1С 8 и выгрузки результатов в SoanrQube

## Программный интерфейс

### Класс "МенеджерПлатформенныхПроверок"

* Функция КонтекстБазыИсточника(Знач ПарамИсходнаяБаза, Знач ПарамПользователь = "", Знач ПарамПароль = "")
```
Устанавливает параметры шаблонной базы для платформенной	проверки. 
Параметры:
  КаталогБазы - Строка - Каталог шаблонной базы для платформенной проверки
  Пользователь - Строка - Пользователь, если задан для шаблонной базы
  Пароль - Строка - Пароль, если задан для шаблонной базы
```
* Функция КонфигураторБазыИсточника(Знач ПарамКонфигуратор)
```
Устанавливает параметры шаблонной базы для платформенной	проверки
Параметры:
  Конфигуратор - УправлениеКонфигуратором - Объект шаблонной базы для платформенной проверки
```
* Функция КаталогИсходныхКодов(Знач ПарамКаталогИсходников)
```
Устанавливает каталог с исходными кодами конфигурации
Параметры:
   ПарамКаталогИсходников - Строка - каталог с исходными кодами конфигурации  
```
* Функция СоздатьБазуИсточникаИзИсходныхКодов(КаталогБазы = "")
```
Создает шаблонную базу для платформенной проверки из исходных кодов
```
* Функция ВремяОжидания(Знач ПарамВремяОжидания)
```
Устанавливает время ожидания результатов платформенной проверки
Параметры:
  ПарамВремяОжидания - Число - Время ожидания завершения платформенной проверки
```
* Функция МаксимальноеВремяОжидания(Знач ПарамВремяОжиданияМакс)
```
Устанавливает максимальное время ожидания результатов платформенной проверки
Параметры:
  ПарамВремяОжиданияМакс - Число - Максимальное время ожидания платформенной проверки (секунд)
```
* Функция НачатьПроверку(Знач КлючиПлатформеннойПроверки, Знач МожноИспользоватьБазуИсточника = Ложь)
```
Запускает на выполнение платформенные проверки по переданному списку ключей
Параметры:
	КлючиПлатформеннойПроверки - Строка - список ключей платформенной проверки разделенных ","
  МожноИспользоватьБазуИсточника - Булево - признак использования базы источника или необходимость создания её копии
```
* Функция ДобавитьРезультатПроверки(Знач КлючиПлатформеннойпроверки, Знач ФайлРезультата)
```
Добавляет файл с результатом уже выполненной платформенной проверки для выгрузки
Параметры:
	КлючиПлатформеннойПроверки - Строка - список ключей платформенной проверки разделенных ","
  ФайлРезультата - Строка - полное имя файла с результатом проверки
```
* Функция ДобавитьФильтр(ФильтрПроверки)
```
Добавляет фильтр на обработаваемые файлы исходных кодов или обработываемые объекты конфигурации
Используется, если нужно выгружать не все ошибки, а только для нужных файлов
Параметры:
   ФильтрПроверки - Сценарий - объект реализующий одну или обе функции "ПроверитьФайл(ОтносительныйПутьКфайлу)", "ПроверитьОбъект(ПутьКОбъекту)"
```
* Функция УдалитьВсеФильтры()
```
Удаляет все добавленные фильтры
```
* Функция ЗавершитьВсеПроверки()
```
Ожидает завершения всех запущенных проверок и заполняет таблицу ошибок
Удаляет все созданные временные файлы.
```
* Функция ТаблицаОшибок()
```
Возвращает таблицу всех найденных ошибок
```

### Класс "ФильтрФайловПоСписку"

Реализует интерфейс ограничения проверяемых файлов по списку файлов исходных кодов

* Процедура ЗагрузитьИзФайла(Знач ПутьКФайлуФильтра, Знач КодировкаФайла = Неопределено)
```
Загружает из переданного файла список файлов исходных кодов
```
* Новый ФильтрФайловПоСписку(Знач ПутьКФайлуФильтра, Знач КодировкаФайла = Неопределено)

### Класс "ГенераторОтчетаSonarQube"

* Процедура ВыгрузитьОшибкиВФайл(ТаблицаОшибок, Знач ИмяПроекта, Знач ФайлРезультата)
```
Выгружает переданную таблицу ошибок в файл ошибок SonarQube
```

Благодарности:
    [Экспорт диагности 1С: АПК для SonarQube 1C (BSL) Community Plugin](https://github.com/otymko/acc-export)
